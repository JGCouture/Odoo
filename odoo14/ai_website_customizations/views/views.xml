<odoo>
  <data>

    <record id="required_product_configuration_form_zbs" model="ir.ui.view">
	        <field name="name">required.prod.config.form</field>
	        <field name="model">required.prod.config</field>
	        <field name="arch" type="xml">
		        <form string="" version="7.0">
		        	<sheet>
		        		<group>
                            <field name="product_template_id" required="True"/>
                            <field name="variant_ids" domain="[('product_tmpl_id','=',product_template_id)]" widget="many2many_tags" required="1"/>
		        		</group>
                        <notebook>
                            <page string="Required Products">
                                <field name="required_product_ids">
                                    <tree editable="bottom">
                                        <field name="product_id" required="1"/>
                                        <field name="required_qty"/>
                                        <field name="special_price"/>
                                        <field name="update_with_main_qty"/>
                                        <field name="required_config_id" invisible="1"/>
                                    </tree>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
		        </form>
	    	</field>
	    </record>

      <record id="required_product_configuration_tree_zbs" model="ir.ui.view">
        <field name="name">required.prod.config.form</field>
        <field name="model">required.prod.config</field>
        <field name="arch" type="xml">
            <tree>
                <field name="product_template_id" required="True"/>
                <field name="variant_ids" widget="many2many_tags"/>
            </tree>
        </field>
      </record>

    <record model="ir.ui.view" id="action_product_inherit_view">
        <field name="name">Product.Inherit.View</field>
        <field name="model">product.product</field>
        <field name="inherit_id" ref="product.product_normal_form_view"/>
        <field name="arch" type="xml">
<!--            <notebook position="inside">-->
<!--                <page string="Required Products">-->
<!--                    <field name="required_product_ids">-->
<!--                        <tree editable="bottom">-->
<!--                            <field name="required_prod_id"/>-->
<!--                            <field name="required_qty"/>-->
<!--                            <field name="special_price"/>-->
<!--                            <field name="product_id" invisible="True"/>-->
<!--                        </tree>-->
<!--                    </field>-->
<!--                </page>-->
<!--            </notebook>-->
            <field name="categ_id" position="after">
                <field name="subscription_product_id">
                    <tree>
                        <field name="name"/>
                        <field name="lst_price"/>
                    </tree>
                </field>
            </field>
        </field>
    </record>

     <record id="product_template_form_view_required_prod_button" model="ir.ui.view">
        <field name="name">product.template.form.inherit</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_only_form_view"/>
        <field name="arch" type="xml">
            <div name="button_box" position="inside">
                <button name="create_required_prod_config" string="Required Products" type="object" icon="fa-sitemap" class="oe_stat_button"/>
            </div>
        </field>
    </record>


<!--    <record model="ir.ui.view" id="action_website_inherit_view">-->
<!--        <field name="name">website.Inherit.form.View</field>-->
<!--        <field name="model">website</field>-->
<!--        <field name="inherit_id" ref="website.view_website_form"/>-->
<!--        <field name="arch" type="xml">-->
<!--            <field name="default_lang_id" position="after">-->
<!--                <field name="restrict_login"/>-->
<!--            </field>-->
<!--        </field>-->
<!--    </record>-->

      <record model="ir.ui.view" id="action_sale_order_inherit_view">
        <field name="name">sale.order.Inherit.form.View</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='order_line']//tree/field[@name='price_subtotal']" position="after">
                <field name="is_subscription_product" invisible="1"/>
            </xpath>
        </field>
    </record>

<!--    <template id="website_sale.products_item" name="Products item">-->
<!--        <t t-set="product_href" t-value="keep(product.website_url, page=(pager['page']['num'] if pager['page']['num']&gt;1 else None))" />-->

<!--        <t t-set="combination_info" t-value="product._get_combination_info(only_template=True, add_qty=add_qty or 1, pricelist=pricelist)"/>-->

<!--        <form action="/shop/cart/update" method="post" class="card oe_product_cart"-->
<!--            t-att-data-publish="product.website_published and 'on' or 'off'"-->
<!--            itemscope="itemscope" itemtype="http://schema.org/Product">-->
<!--            <div class="card-body p-1 oe_product_image">-->
<!--                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />-->
<!--                <a t-att-href="product_href" class="d-block h-100" itemprop="url">-->
<!--                    <t t-set="image_holder" t-value="product._get_image_holder()"/>-->
<!--                    <span t-field="image_holder.image_1920"-->
<!--                        t-options="{'widget': 'image', 'preview_image': 'image_1024' if product_image_big else 'image_256', 'itemprop': 'image'}"-->
<!--                        class="d-flex h-100 justify-content-center align-items-center"/>-->
<!--                </a>-->
<!--            </div>-->
<!--            <div class="card-body p-0 text-center o_wsale_product_information">-->
<!--                <div class="p-2 o_wsale_product_information_text">-->
<!--                    <h6 class="o_wsale_products_item_title">-->
<!--                        <a itemprop="name" t-att-href="product_href" t-att-content="product.name" t-field="product.name" />-->
<!--                        <a role="button" t-if="not product.website_published" t-att-href="product_href" class="btn btn-sm btn-danger" title="This product is unpublished.">Unpublished</a>-->
<!--                    </h6>-->
<!--                    <t t-if="website.restrict_login and website.sudo().env.user.has_group('base.group_user')">-->
<!--                        <div class="product_price" itemprop="offers" itemscope="itemscope" itemtype="http://schema.org/Offer">-->
<!--                            <del t-attf-class="text-danger mr-2 {{'' if combination_info['has_discounted_price'] else 'd-none'}}" style="white-space: nowrap;" t-esc="combination_info['list_price']" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}" />-->
<!--                            <span t-if="combination_info['price']" t-esc="combination_info['price']" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>-->
<!--                            <span itemprop="price" style="display:none;" t-esc="combination_info['price']" />-->
<!--                            <span itemprop="priceCurrency" style="display:none;" t-esc="website.currency_id.name" />-->
<!--                        </div>-->
<!--                    </t>-->
<!--                    <t t-if="not website.restrict_login">-->
<!--                        <div class="product_price" itemprop="offers" itemscope="itemscope" itemtype="http://schema.org/Offer">-->
<!--                            <del t-attf-class="text-danger mr-2 {{'' if combination_info['has_discounted_price'] else 'd-none'}}" style="white-space: nowrap;" t-esc="combination_info['list_price']" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}" />-->
<!--                            <span t-if="combination_info['price']" t-esc="combination_info['price']" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>-->
<!--                            <span itemprop="price" style="display:none;" t-esc="combination_info['price']" />-->
<!--                            <span itemprop="priceCurrency" style="display:none;" t-esc="website.currency_id.name" />-->
<!--                        </div>-->
<!--                    </t>-->
<!--                </div>-->
<!--                <div class="o_wsale_product_btn"/>-->
<!--            </div>-->
<!--            <t t-set="bg_color" t-value="td_product['ribbon']['bg_color'] or ''"/>-->
<!--            <t t-set="text_color" t-value="td_product['ribbon']['text_color']"/>-->
<!--            <t t-set="bg_class" t-value="td_product['ribbon']['html_class']"/>-->
<!--            <span t-attf-class="o_ribbon #{bg_class}" t-attf-style="#{text_color and ('color: %s; ' % text_color)}#{bg_color and 'background-color:' + bg_color}" t-raw="td_product['ribbon']['html'] or ''"/>-->
<!--        </form>-->
<!--    </template>-->

<!--    <template id="website_sale.product_price">-->
<!--      <div itemprop="offers" itemscope="itemscope" itemtype="http://schema.org/Offer" class="product_price mt16">-->
<!--          <t t-if="website.restrict_login and website.sudo().env.user.has_group('base.group_user')">-->
<!--              <h4 class="oe_price_h4 css_editable_mode_hidden">-->
<!--                  <span t-attf-class="text-danger oe_default_price {{'' if combination_info['has_discounted_price'] else 'd-none'}}" style="text-decoration: line-through; white-space: nowrap;"-->
<!--                      t-esc="combination_info['list_price']" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"-->
<!--                  />-->
<!--                  <b class="oe_price" style="white-space: nowrap;" t-esc="combination_info['price']" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>-->
<!--                  <span itemprop="price" style="display:none;" t-esc="combination_info['price']"/>-->
<!--                  <span itemprop="priceCurrency" style="display:none;" t-esc="website.currency_id.name"/>-->
<!--              </h4>-->
<!--              <h4 class="css_non_editable_mode_hidden decimal_precision" t-att-data-precision="str(website.currency_id.decimal_places)">-->
<!--                <span t-field="product.list_price"-->
<!--                    t-options='{-->
<!--                       "widget": "monetary",-->
<!--                       "display_currency": product.currency_id,-->
<!--                   }'/>-->
<!--              </h4>-->
<!--          </t>-->
<!--          <t t-if="not website.sudo().restrict_login">-->
<!--              <h4 class="oe_price_h4 css_editable_mode_hidden">-->
<!--                  <span t-attf-class="text-danger oe_default_price {{'' if combination_info['has_discounted_price'] else 'd-none'}}" style="text-decoration: line-through; white-space: nowrap;"-->
<!--                      t-esc="combination_info['list_price']" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"-->
<!--                  />-->
<!--                  <b class="oe_price" style="white-space: nowrap;" t-esc="combination_info['price']" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>-->
<!--                  <span itemprop="price" style="display:none;" t-esc="combination_info['price']"/>-->
<!--                  <span itemprop="priceCurrency" style="display:none;" t-esc="website.currency_id.name"/>-->
<!--              </h4>-->
<!--              <h4 class="css_non_editable_mode_hidden decimal_precision" t-att-data-precision="str(website.currency_id.decimal_places)">-->
<!--                <span t-field="product.list_price"-->
<!--                    t-options='{-->
<!--                       "widget": "monetary",-->
<!--                       "display_currency": product.currency_id,-->
<!--                   }'/>-->
<!--              </h4>-->
<!--          </t>-->
<!--      </div>-->
<!--    </template>-->

    <template id="website_sale.cart_lines" name="Shopping Cart Lines">
        <div t-if="not website_sale_order or not website_sale_order.website_order_line" class="js_cart_lines alert alert-info">
          Your cart is empty!
        </div>
        <table class="mb16 table table-striped table-sm js_cart_lines" id="cart_products" t-if="website_sale_order and website_sale_order.website_order_line">
            <thead>
                <tr>
                    <th class="td-img">Product</th>
                    <th></th>
                    <th class="text-center td-qty">Quantity</th>
                    <th class="text-center td-price">Price</th>
                    <th class="text-center td-action"></th>
                </tr>
            </thead>
            <tbody>
                <t t-foreach="website_sale_order.website_order_line" t-as="line">
                    <tr t-att-class="'optional_product info' if line.linked_line_id else None">
                        <td colspan="2" t-if="not line.product_id.product_tmpl_id" class='td-img'></td>
                        <td align="center" t-if="line.product_id.product_tmpl_id" class='td-img'>
                            <span t-field="line.product_id.image_128" t-options="{'widget': 'image', 'qweb_img_responsive': False, 'class': 'rounded o_image_64_max'}" />
                        </td>
                        <td t-if="line.product_id.product_tmpl_id" class='td-product_name'>
                            <div>
                                <t t-call="website_sale.cart_line_product_link">
                                    <strong t-field="line.name_short" />
                                </t>
                            </div>
                            <t t-call="website_sale.cart_line_description_following_lines">
                                <t t-set="div_class" t-value="'d-none d-md-block'"/>
                            </t>
                        </td>
                        <td class="text-center td-qty">
                            <div class="css_quantity input-group mx-auto">
                                <div class="input-group-prepend">
                                    <t t-if="line.is_subscription_product or line.is_required_prod_line">
                                        <a t-attf-href="#" style="pointer-events: none" class="btn btn-link js_add_cart_json d-none d-md-inline-block" aria-label="Remove one" title="Remove one">
                                            <i class="fa fa-minus"></i>
                                        </a>
                                    </t>
                                    <t t-else="">
                                        <a t-attf-href="#" class="btn btn-link js_add_cart_json d-none d-md-inline-block" aria-label="Remove one" title="Remove one">
                                            <i class="fa fa-minus"></i>
                                        </a>
                                    </t>
                                </div>
                                <t t-if="line.is_subscription_product or line.is_required_prod_line">
                                    <input type="text" readonly="readonly" class="js_quantity form-control quantity" t-att-data-line-id="line.id" t-att-data-product-id="line.product_id.id" t-att-value="int(line.product_uom_qty) == line.product_uom_qty and int(line.product_uom_qty) or line.product_uom_qty" />
                                </t>
                                <t t-else="">
                                    <input type="text" class="js_quantity form-control quantity" t-att-data-line-id="line.id" t-att-data-product-id="line.product_id.id" t-att-value="int(line.product_uom_qty) == line.product_uom_qty and int(line.product_uom_qty) or line.product_uom_qty" />
                                </t>
                                <div class="input-group-append">
                                    <t t-if="line.is_subscription_product or line.is_required_prod_line">
                                        <a t-attf-href="#" style="pointer-events: none" class="btn btn-link float_left js_add_cart_json d-none d-md-inline-block" aria-label="Add one" title="Add one">
                                            <i class="fa fa-plus"></i>
                                        </a>
                                    </t>
                                    <t t-else="">
                                        <a t-attf-href="#" class="btn btn-link float_left js_add_cart_json d-none d-md-inline-block" aria-label="Add one" title="Add one">
                                            <i class="fa fa-plus"></i>
                                        </a>
                                    </t>
                                </div>
                            </div>
                        </td>
                        <td class="text-center td-price" name="price">
                            <t t-set="combination" t-value="line.product_id.product_template_attribute_value_ids + line.product_no_variant_attribute_value_ids"/>
                            <t t-set="combination_info" t-value="line.product_id.product_tmpl_id._get_combination_info(combination, pricelist=website_sale_order.pricelist_id)"/>

                            <t t-set="list_price_converted" t-value="website.currency_id._convert(combination_info['list_price'], website_sale_order.currency_id, website_sale_order.company_id, date)"/>
                            <t groups="account.group_show_line_subtotals_tax_excluded" t-if="(website_sale_order.pricelist_id.discount_policy == 'without_discount' and website_sale_order.currency_id.compare_amounts(list_price_converted, line.price_reduce_taxexcl) == 1) or website_sale_order.currency_id.compare_amounts(line.price_unit, line.price_reduce) == 1" name="order_line_discount">
                                <del t-attf-class="#{'text-danger mr8'}" style="white-space: nowrap;" t-esc="list_price_converted" t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}" />
                            </t>
                            <span t-field="line.price_reduce_taxexcl" style="white-space: nowrap;" t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}" groups="account.group_show_line_subtotals_tax_excluded" />
                            <t groups="account.group_show_line_subtotals_tax_included" t-if="(website_sale_order.pricelist_id.discount_policy == 'without_discount' and website_sale_order.currency_id.compare_amounts(list_price_converted, line.price_reduce_taxinc) == 1) or website_sale_order.currency_id.compare_amounts(line.price_unit, line.price_reduce) == 1" name="order_line_discount">
                                <del t-attf-class="#{'text-danger mr8'}" style="white-space: nowrap;" t-esc="list_price_converted" t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}" />
                            </t>
                            <span t-field="line.price_reduce_taxinc" style="white-space: nowrap;" t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}" groups="account.group_show_line_subtotals_tax_included" />
                        </td>
                        <td t-if="not line.is_subscription_product and not line.is_required_prod_line" class="td-action">
                            <a href='#' aria-label="Remove from cart" title="Remove from cart" class='js_delete_product no-decoration'> <small><i class='fa fa-trash-o'></i></small></a>
                        </td>
                        <td t-if="line.is_subscription_product" class="td-action">
<!--                            <a href='#' aria-label="Remove from cart" title="Remove from cart" class='js_delete_product no-decoration'> <small><i class='fa fa-trash-o'></i></small></a>-->
                        </td>
                    </tr>
                </t>
            </tbody>
        </table>

    </template>

    <template id="website_sale.total">
        <div id="cart_total" t-att-class="extra_class or ''" t-if="website_sale_order and website_sale_order.website_order_line">
            <table class="table">
                <tr id="empty">
                    <t t-if='not no_rowspan'><td rowspan="10" class="border-0"/></t>
                    <td class="col-md-2 col-3 border-0"></td>
                    <td class="col-md-2 col-3 border-0" ></td>
                </tr>
                <t t-set="product_subscription" t-value="website_sale_order.order_line.filtered(lambda l: l.is_subscription_product == True or l.product_id.recurring_invoice)"/>
                <t t-set="value_subscription" t-value="sum(product_subscription.mapped('price_subtotal'))"/>
                <t t-set="amount_untaxed" t-value="website_sale_order.amount_untaxed - value_subscription"/>
                <tr id="order_total_untaxed">
                    <td class="text-right border-0">Subtotal:</td>
                    <td class="text-xl-right border-0" >
                        <span t-esc="amount_untaxed" class="monetary_field" style="white-space: nowrap;" t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}"/>
                    </td>
                </tr>

                <tr id="order_sub_product_total">
                    <td class="text-right border-0">Recurring Total:</td>
                    <td class="text-xl-right border-0">
                        <span t-esc="value_subscription" class="monetary_field" style="white-space: nowrap;" t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}" />
                    </td>
                </tr>
                <tr id="order_total_taxes">
                    <td class="text-right border-0">Taxes:</td>
                    <td class="text-xl-right border-0">
                        <span t-field="website_sale_order.amount_tax" class="monetary_field" style="white-space: nowrap;" t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}" />
                    </td>
                </tr>


                <tr id="order_total">
                    <td class="text-right"><strong>Total Due Today:</strong></td>
                    <td class="text-xl-right">
                        <strong t-field="website_sale_order.amount_total" class="monetary_field"
                        t-options='{"widget": "monetary", "display_currency": website_sale_order.pricelist_id.currency_id}'/>
                    </td>
                </tr>
            </table>
        </div>
    </template>

  </data>
</odoo>